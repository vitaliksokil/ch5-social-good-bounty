(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[463],{5787:function(t,e,r){var o=r(7854),s=r(7976),n=o.TypeError;t.exports=function(t,e){if(s(e,t))return t;throw n("Incorrect invocation")}},3678:function(t){t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},2801:function(t,e,r){"use strict";var o=r(2109),s=r(5005),n=r(9114),i=r(3070).f,c=r(2597),a=r(5787),u=r(9587),l=r(6277),d=r(3678),m=r(7741),_=r(1913),E="DOMException",p=s("Error"),g=s(E),R=function(){a(this,h);var t=arguments.length,e=l(t<1?void 0:arguments[0]),r=l(t<2?void 0:arguments[1],"Error"),o=new g(e,r),s=p(e);return s.name=E,i(o,"stack",n(1,m(s.stack,1))),u(o,this,R),o},h=R.prototype=g.prototype,w="stack"in p(E),T="stack"in new g(1,2),y=w&&!T;o({global:!0,forced:_||y},{DOMException:y?R:g});var b=s(E),I=b.prototype;if(I.constructor!==b)for(var f in _||i(I,"constructor",n(1,b)),d)if(c(d,f)){var v=d[f],N=v.s;c(b,N)||i(b,N,n(6,v.c))}},7986:function(t,e,r){"use strict";r.d(e,{Z:function(){return m}});var o=r(3396),s=r(7139);const n={class:"custom-progress-wrap"},i={class:"caption p-2",style:{"background-color":"rgba(0, 0, 0, 0.5)","border-radius":"3px"}},c={class:"custom-progress-inner"};function a(t,e,r,a,u,l){return(0,o.wg)(),(0,o.iD)("div",n,[(0,o._)("span",i,"Tickets bought: "+(0,s.zw)(r.currentValue)+"/"+(0,s.zw)(r.maxValue),1),(0,o._)("div",c,[(0,o._)("div",{class:"custom-progress bg-danger",style:(0,s.j5)({width:l.width+"%"})},null,4)])])}var u={name:"CustomProgressBar",props:["currentValue","maxValue"],computed:{width(){return this.currentValue/this.maxValue*100}}},l=r(89);const d=(0,l.Z)(u,[["render",a],["__scopeId","data-v-186be388"]]);var m=d},7463:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return L}});var o=r(3396),s=r(7139),n=r(9242);const i={class:"site-section"},c={class:"container"},a={class:"row mb-5 align-items-st"},u={class:"col-md-5"},l={class:"heading-20219"},d={class:"title text-cursive mb-4"},m=["disabled"],_={class:"col-md-7"},E={class:"cause shadow-sm"},p={class:"cause-link d-block"},g=["src"],R={class:"px-3 pt-3 border-top-0 border border shadow-sm"},h={class:"mb-4"},w={class:"border-top border-light border-bottom py-2 d-flex justify-content-between"},T=(0,o._)("div",null,"Ticket price",-1),y={class:"ml-auto"},b={class:"text-success"},I={class:"py-4"},f={class:"d-flex align-items-center"},v={class:""};function N(t,e,r,N,A,M){const k=(0,o.up)("custom-progress-bar"),D=(0,o.up)("font-awesome-icon");return(0,o.wg)(),(0,o.iD)("div",i,[(0,o._)("div",c,[(0,o._)("div",a,[(0,o._)("div",u,[(0,o._)("div",l,[(0,o._)("h2",d,(0,s.zw)(A.currentMeeting.title),1),(0,o._)("p",null,(0,s.zw)(A.currentMeeting.description),1),(0,o._)("p",null,[(0,o._)("button",{class:"btn btn-primary rounded-0 px-4",onClick:e[0]||(e[0]=(0,n.iM)(((...t)=>M.buyTicketAction&&M.buyTicketAction(...t)),["prevent"])),disabled:A.currentMeeting.bought_tickets==A.currentMeeting.total_tickets},"Buy Ticket",8,m)])])]),(0,o._)("div",_,[(0,o._)("div",E,[(0,o._)("a",p,[(0,o._)("img",{src:A.currentMeeting.nft_media,alt:"Image",class:"img-fluid"},null,8,g),(0,o.Wm)(k,{"current-value":A.currentMeeting.bought_tickets,"max-value":A.currentMeeting.total_tickets},null,8,["current-value","max-value"])]),(0,o._)("div",R,[(0,o._)("span",{class:(0,s.C_)(["py-1 small px-2 rounded mb-3 d-inline-block",A.currentDonationTypeClassName])},[(0,o.Wm)(D,{icon:A.currentDonationTypeIconName},null,8,["icon"]),(0,o.Uk)(" "+(0,s.zw)(A.currentMeeting.donation_type),1)],2),(0,o._)("h3",h,(0,s.zw)(A.currentMeeting.title),1),(0,o._)("div",w,[T,(0,o._)("div",y,[(0,o._)("strong",b,(0,s.zw)(t.$filters.formatTicketPrice(A.currentMeeting.ticket_price))+" â“ƒ",1)])]),(0,o._)("div",I,[(0,o._)("div",f,[(0,o._)("div",v,(0,s.zw)(A.currentMeeting.owner_name),1)])])])])])])])])}r(2801);var A=r(7986),M=r(5648),k=r.n(M),D=r(5361)["Buffer"];const S=k()(3).times(10**13).toFixed();var C={name:"SingleMeetingComponent",components:{CustomProgressBar:A.Z},data(){return{currentMeeting:{},currentDonationTypeClassName:"",currentDonationTypeIconName:""}},methods:{async getCurrentMeeting(){const t=window.btoa(JSON.stringify({id:+this.$route.params.id}));let e=await window.provider.query({request_type:"call_function",account_id:window.walletSelector.getContractId(),method_name:"get_meeting_by_id",args_base64:t,finality:"optimistic"}).catch((()=>{this.$router.push({name:"home"})}));this.currentMeeting=JSON.parse(D.from(e.result).toString())},async buyTicket(){await window.walletSelector.signAndSendTransaction({signerId:window.nearAccount.accountId,actions:[{type:"FunctionCall",params:{methodName:"buy_ticket",args:{meeting_id:+this.$route.params.id},gas:S,deposit:k()((this.currentMeeting.ticket_price/10**24).toFixed(5)).times(10**24).toFixed()}}]})},async buyTicketAction(){let t=this.$loading.show();try{await this.buyTicket(),this.$swal.fire({icon:"success",title:"Success",text:"Ticket was successfully bought!",footer:"To look at your ticket go to your wallet collectibles!"}),await this.getCurrentMeeting()}catch(e){this.$swal.fire({icon:"error",title:"Error",text:e.message,footer:""}),console.log(e)}t.hide()}},async mounted(){let t=this.$loading.show();await this.getCurrentMeeting(),this.currentDonationTypeClassName=this.$DONATION_TYPES[this.currentMeeting.donation_type].className,this.currentDonationTypeIconName=this.$DONATION_TYPES[this.currentMeeting.donation_type].iconName,t.hide();let e=window.location.search.substring(1),r=new URLSearchParams(e);const o=r.get("transactionHashes");o&&this.$swal.fire({icon:"success",title:"Success",text:"Ticket was successfully bought!",footer:"To look at your ticket go to your wallet collectibles!"})}},O=r(89);const x=(0,O.Z)(C,[["render",N]]);var L=x}}]);
//# sourceMappingURL=463.745feec5.js.map